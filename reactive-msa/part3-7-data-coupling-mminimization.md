数据耦合最小化
=============================
> 沉默不仅仅是美好的，它还可以很小范错 --- Bob Monkhouse

我们已经被单机版所声称一个中心化关系型数据库所纵坏太久了--假设大家都乐于使用一个[强一致](http://www.bailis.org/blog/linearizability-versus-serializability/)(详见 ACID)模型。但是强一致需要协调者(`coordination`)，这个对于分布式系统来说是很昂贵的，同在扩展性，吞吐时，实时性和可用性很有限。

协调者的需求--增加处理竞争和一致的成本，这个在`通用扩展规则`([Universal Scalability Law]())有所定义--意味着单个服务不能单独处理但需要等待数据一致。当设计基于微服务系统时，我们应该严格地遵守服务与服务之间状态的协调最小化，使微服务享受片刻沉默带来的愉悦('comfortably share silence')[20]。

**我怎么样设计微服务来保证状态协调最小化？**
在传统中，开发者已经使用一个单机版架构连接一个SQL数据库--提供一个"全局"的一致性。这个模型觉得正常是因为它提供一个全局一致的概念"当前"，一个绝对表现--这个很直观所以很容易。但是就像我们讨论那样，打破这种结构和拆分单机版，被隔离的微服务有很多好处。

你需要开始研究数据然后把它作为一个域来梳理它们的关系，保证和业务完整约束，接近现实(`exploiting reality`)。

这通常包括反范式来处理数据。持续定义系统的一致性(事务)边界，在内容你可以依靠强一致。然后你应该认这些边界去驱动设计和微服务的范围。尽时减小你设计的服务有数据依赖和关系依赖，有时要完全消除。数据解耦--它意味着你不需要当改变的时候去协调。

-------------------------
[20]. 出自Quentin Tanrantion执导的电影<低俗小说>中Mia Wallace的话语，后来Peter Bailis在他的优秀的演讲用到--[沉默是金:避免协调者的系统设计](https://speakerdeck.com/pbailis/silence-is-golden-coordination-avoiding-systems-design)

